function initTheme(){document.body.classList.add("loaded");const t=document.querySelector(".navbar");window.addEventListener("scroll",()=>{window.scrollY>50?t.classList.add("scrolled"):t.classList.remove("scrolled")})}function initMobileMenu(){const t=document.getElementById("mobile-menu-toggle"),e=document.getElementById("nav-links"),n=e.querySelectorAll("a");t&&e&&(t.addEventListener("click",()=>{const n="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!n),t.classList.toggle("active"),e.classList.toggle("active"),document.body.classList.toggle("no-scroll")}),n.forEach(n=>{n.addEventListener("click",()=>{t.classList.remove("active"),e.classList.remove("active"),t.setAttribute("aria-expanded","false"),document.body.classList.remove("no-scroll")})}),document.addEventListener("click",n=>{e.contains(n.target)||t.contains(n.target)||!e.classList.contains("active")||(t.classList.remove("active"),e.classList.remove("active"),t.setAttribute("aria-expanded","false"),document.body.classList.remove("no-scroll"))}))}function initScrollAnimations(){const t=new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&t.target.classList.add("visible")})},{root:null,rootMargin:"0px",threshold:.1});document.querySelectorAll(".hero-content, .hero-visual, .feature-card, .step-card, .download-card, .section-header, .about-content, .feature-showcase-item").forEach(e=>{e.classList.add("reveal-on-scroll"),t.observe(e)})}function initCounters(){const t=document.getElementById("reading-waste-counter");if(t){let e=0;const n=.13/3600;setInterval(()=>{e+=n,t.textContent=e.toFixed(4)},1e3)}const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;animateValue(n,0,parseFloat(n.getAttribute("data-value")),2e3),e.unobserve(n)}})},{threshold:.5});document.querySelectorAll(".stat-value, .stat-big-value").forEach(t=>{const n=t.textContent,o=parseFloat(n.replace(/[^0-9.]/g,""));isNaN(o)||(t.setAttribute("data-value",o),t.setAttribute("data-original",n),t.textContent="0",e.observe(t))})}function animateValue(t,e,n,o){let i=null;const a=s=>{i||(i=s);const c=Math.min((s-i)/o,1),r=1===c?1:1-Math.pow(2,-10*c),l=e+(n-e)*r,d=t.getAttribute("data-original")||"",u=d.replace(/[0-9.]/g,""),m=d.match(/^[^0-9.]*/)?d.match(/^[^0-9.]*/)[0]:"",g=n%1!=0;t.textContent=m+(g?l.toFixed(1):Math.floor(l))+u,c<1?window.requestAnimationFrame(a):t.textContent=d};window.requestAnimationFrame(a)}function initBatteryAnimation(){const t=document.getElementById("battery-level"),e=document.getElementById("battery-percentage"),n=document.getElementById("battery-status"),o=document.getElementById("electron-stream"),i=document.getElementById("charging-cable"),a=document.querySelector(".action-toggle"),s=document.querySelector(".action-status");if(!t||!e)return;let c=75,r=!0,l=0;function d(t){n&&(n.textContent=t)}setInterval(()=>{if(l>0)return void l--;let n,u;r?(c+=1,c>=90&&(c=90,r=!1,d("Optimized (Not Charging)"),a&&a.classList.remove("active"),s&&(s.textContent="Off"),l=30)):(c-=.5,c<=20&&(c=20,r=!0,d("Charging (Smart Plug On)"),a&&a.classList.add("active"),s&&(s.textContent="Connected"),l=20)),t.style.height=`${c}%`,e.textContent=`${Math.floor(c)}%`,c<=20?(n="linear-gradient(to top, #ef4444, #f97316)",u="rgba(239, 68, 68, 0.5)"):c>=90?(n="linear-gradient(to top, #10b981, #34d399)",u="rgba(16, 185, 129, 0.5)"):(n="linear-gradient(to top, #06b6d4, #3b82f6)",u="rgba(59, 130, 246, 0.5)"),t.style.background=n,t.style.boxShadow=`0 0 40px ${u}`,r?(i&&i.classList.add("visible"),o&&o.classList.add("active")):(i&&i.classList.remove("visible"),o&&o.classList.remove("active"))},100)}function initOSDetection(){const t=navigator.platform.toLowerCase(),e=navigator.userAgent.toLowerCase();let n="unknown";if(t.includes("win")||e.includes("windows")?n="windows":t.includes("mac")||e.includes("macintosh")?n="macos":(t.includes("linux")||e.includes("linux"))&&(n="linux"),"unknown"!==n){const t=document.querySelector(`.download-card[data-platform="${n}"]`);if(t){t.classList.add("featured");const e=document.querySelector(".btn-hero");e&&(e.href="#download",e.addEventListener("click",()=>{setTimeout(()=>{t.classList.add("highlight-pulse"),setTimeout(()=>t.classList.remove("highlight-pulse"),2e3)},800)}))}}}function initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();const e=this.getAttribute("href");if("#"===e)return;const n=document.querySelector(e);if(n){const t=document.querySelector(".navbar").offsetHeight,e=n.getBoundingClientRect().top+window.scrollY-t-20;window.scrollTo({top:e,behavior:"smooth"})}})})}document.addEventListener("DOMContentLoaded",()=>{initTheme(),initMobileMenu(),initScrollAnimations(),initCounters(),initBatteryAnimation(),initOSDetection(),initSmoothScroll()});